services:
  reader:
    image: ghcr.io/intergalacticalvariable/reader:latest
    container_name: reader-container
    ports:
      - "3000:3000"
    volumes:
      - local_storage:/app/local-storage
    networks:
      - reader-network

  reader-mcp:
    build:
      context: .
      dockerfile: Dockerfile.mcp
    container_name: reader-mcp-container
    environment:
      - READER_ENDPOINT=http://reader:3000
      - PORT=8080
    ports:
      - "8080:8080"
    depends_on:
      - reader
    networks:
      - reader-network

volumes:
  local_storage:

networks:
  reader-network:
    driver: bridge
